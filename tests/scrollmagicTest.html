<style>
.spacer {
    padding: 2dvw;
    min-height: 800px;
    width: 900px;
    border: 1px solid gray;
}

.trigger {
    width: 100%;
    height: 40%;
    background-color: rgba(244, 244, 10, 0);
    border: 1px solid green;
    display: flex;
    justify-content: flex-end;
    flex-direction: column;
}

.fill {
    width: 100%;
    height: 20%;
    border: 1px solid red;
}

.fill2 {
    width: 100%;
    height: 100%;
    border: 1px solid blue;
}

</style>

<body>
    <div class="spacer">
        <div id="" class="fill"></div>
        <div id="" class="trigger"></div>
        <div id="" class="fill2"></div>
        <!-- <div id="" class="trigger2">a</div>
        <div id="" class="fill2"></div> -->
    </div>

</body>


<script src="../frontend/js/ScrollMagic_2-0-7.min.js"></script>
<script src="../frontend/js/debug.addIndicators_2-0-7.js"></script>
<script>

// global scroll magic controller
const scrollMagicController = new ScrollMagic.Controller();

    function countHeightPanel(element) {
        return element.clientHeight;
    }

    function createScene(element, act, options) {
         if (element === null) return console.log("no scrollMagic scene panel created");
             scene = new ScrollMagic.Scene(options)
            scene.addTo(scrollMagicController)
            scene.addIndicators()
            scene.on("progress", act)
    }



// per-panel scroll trigger
const triggerDOM = document.querySelector(".trigger")
const triggerDOM_Opt = {triggerElement: triggerDOM,
                            duration: "10%",
                            triggerHook: "0.5",
                            reverse: true }
function triggerDOM_act() {
        triggerDOM.innerText = this.progress().toFixed(2);
        triggerDOM.style.backgroundColor = "rgba(244, 244, 10," + this.progress().toFixed(2)+ ")";
        console.log(this.progress().toFixed(2))
    }                       

createScene(triggerDOM, triggerDOM_act, triggerDOM_Opt)




	// build scene
	// let scene = new ScrollMagic.Scene({triggerElement: triggerDOM, duration: "40%", triggerHook: "0.2", reverse: true})
	// scene.addTo(scrollMagicController)
	// scene.addIndicators() // add indicators (requires plugin)
	// 				// .on("enter leave", function (e) {
    //                 //     console.log(e.type == "enter" ? "inside" : "outside")
	// 				// })
	// 				// .on("start end", function (e) {
    //                 //     console.log(e.type == "start" ? "top" : "bottom")
	// 				// })
	// scene.on("progress", triggerDOM_act )
</script>
